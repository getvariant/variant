//
// Variant Java client + Servlet adapter demo application.
// Demonstrates instrumentation of a basic Variant toggle.
// See https://github.com/getvariant/variant-java-demo for details.
//
// Copyright Â© 2015-2018 Variant, Inc. All Rights Reserved.

{
   'meta':{
      'name':'petclinic_toggles',
      'comment':'Variation schema for feature toggles on the Pet Clinic demo application',
      'flusher': {
        'class':'com.variant.server.ext.demo.EventFlusherToggler',
        'init':{'attrName': 'ViewAsJsonFix', 'schemaFileName':'schemata/petclinic-toggles.json'}
       }
   },
   'states':[                                                
     { 
       // The veterinarians page
       'name':'vets',
       'parameters': [
            {
               'name':'path',
               'value':'/petclinic/vets.html'
            }
        ]
     }
   ],                                                        
   'tests':[                                                 
      {                                                      
         'name':'ViewAsJsonFix',
         'isOn': true,
         'experiences':[                                     
            {                                                
               'name':'existing',                                   
               'weight':1,                                  
               'isControl':true                              
            },                                               
            {                                                
               'name':'fix',
               'weight':1                                   
            }              
         ],                                                  
         'onStates':[
            {                                                
               'stateRef':'vets',                    
               'variants':[                                  
                  {                                          
                     'experienceRef': 'fix',
                     'parameters': [
                        {
                           'name':'path',
                           'value':'/vets__ViewAsJsonFix.html'
                        }
                     ]
                  }                      
               ]                                             
            }
         ]
      }                                                     
   ]                                                         
}                         
      
